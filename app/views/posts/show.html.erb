<p id="notice"><%= notice %></p>
<%= form_for(@guess) do |f| %>
<% end %>

<p><%= @post.post_attachments.length %></p>
  <script type = "text/javascript">
    <% ary10 = Array.new %>
    <% @post.post_attachments.each do |post_attachment| %>
      <% ary10.push(post_attachment) %>

    <% end %>

  <% @post.post_attachments.each do |post_attachment| %>
    <% if ary10.length <= 10 %>
      <% ary10.push(post_attachment) %>
    <% end  %>
  <% end %>

  <% ary10.shuffle! %>

    var attachments = <%= ary10.to_json.html_safe %>;
    console.log('current length', attachments.length)
    console.log(attachments)
    function countdown() {
      let count = 11;
      let timerId = setInterval(function() {
        count--;
        let counter = count;
        document.getElementById("countdown").innerHTML = counter;
     
        if(count == 1){
          count = 11;
        }
        for(item in attachments){
          console.log(attachments[item])
          console.log('i', item, 'c', count)
          if(item == count){
            let currentUrl = attachments[item].avatar.url
            console.log('coo', currentUrl)
        let currentImg = document.getElementById("showImage");
        currentImg.innerHTML=`<img src=${currentUrl} height=300 width=300>`;
          }
        }
      // attachments.forEach((element)=>{

      //  if(element.id === count){
      //    console.log(element.avatar.url);
      //    let currentUrl = element.avatar.url;
      //   let currentImg = document.getElementById("showImage");
      //   currentImg.innerHTML=`<img src=${currentUrl} height=300 width=300>`;
      //  }
      // })  
      }, 1000);
    }
    countdown();
  </script>

  <span id="countdown" style="font-weight: bold;"></span>
  <div id="showImage"></div>
<p>
  <strong>Title:</strong>
  <%= @post.title %>
</p>

<%= link_to 'Edit', edit_post_path(@post) %> |
<%= link_to 'Back', posts_path %>
